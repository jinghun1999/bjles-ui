<div class="modal-header">
  <div class="modal-title">编辑车间信息</div>
</div>
<nz-spin *ngIf="loading" class="modal-spin"></nz-spin>
<form nz-form #f="ngForm" (ngSubmit)="save()" *ngIf="!loading">
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="plant">工厂</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="请选择工厂">
      <nz-select [(ngModel)]="record.plant" name="plant" id="plant" [nzDisabled]="!record.add">
        <nz-option *ngFor="let p of plants" [nzLabel]="p.text" [nzValue]="p.value"></nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="workshop" nzRequired>车间</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="车间不能为空">
      <input nz-input [(ngModel)]="record.workshop" name="workshop" id="workshop" required [disabled]="!record.add" />
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="workshop_name" nzRequired>车间或库区名称</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="名称不能为空">
      <input nz-input [(ngModel)]="record.workshop_name" id="workshop_name" name='workshop_name' required />
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="workshop_type" nzRequired>车间或库区类型</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="请选择类型">
      <nz-select [(ngModel)]="record.workshop_type" name="workshop_type" id="workshop_type" required>
        <option value="">请选择</option>
        <nz-option *ngFor="let p of codes.c1" [nzLabel]="p.text" [nzValue]="p.val"></nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="workschedule_type" nzRequired>车间时间调整类型</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="请选择调整类型">
      <nz-select [(ngModel)]="record.workschedule_type" name="workschedule_type" id="workschedule_type" required>
        <nz-option *ngFor="let p of codes.c2" [nzLabel]="p.text" [nzValue]="p.val"></nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="workshop_due" nzRequired>业务类型</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="请选择业务类型">
      <nz-select [(ngModel)]="record.workshop_due" name="workshop_due" id="workshop_due" required>
        <nz-option *ngFor="let p of codes.c3" [nzLabel]="p.text" [nzValue]="p.val"></nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>
  <div class="modal-footer">
    <button nz-button type="button" (click)="close()">关闭</button>
    <button nz-button [disabled]="!f.form.valid || !f.form.dirty" [nzLoading]="http.loading"
      nzType="primary">保存</button>
  </div>
</form>
